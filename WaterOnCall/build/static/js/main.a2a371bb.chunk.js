(window.webpackJsonpWaterOnCall=window.webpackJsonpWaterOnCall||[]).push([[0],{41:function(e,t,a){e.exports=a(87)},46:function(e,t,a){},69:function(e,t,a){},80:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(35),i=a.n(l),s=(a(46),a(14)),r=a(15),c=a(8),u=a(9),m=a(11),h=a(10),p=a(12),d=a(13),g=a(36),f=a.n(g),b=a(37),v=a.n(b),E=a(26),C=(a(69),a(16)),I=a.n(C),w=(a(79),I.a.initializeApp({apiKey:"AIzaSyAUiNez-ZpCmT5wNKMCwfkvliQc5W9LFJE",authDomain:"wateroncall-c3835.firebaseapp.com",databaseURL:"https://wateroncall-c3835.firebaseio.com",projectId:"wateroncall-c3835",storageBucket:"wateroncall-c3835.appspot.com",messagingSenderId:"522126844441",appId:"1:522126844441:web:e314307be833fbcf9d0088"})),N=(I.a.database(),w),y=I.a.messaging();y.requestPermission().then(function(){return console.log("Have permission"),y.getToken()}).then(function(e){console.log(e)}).catch(function(e){console.log("Error occured",e)}),y.onMessage(function(e){console.log("onMessage:",e)});var O=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.props.history.push("/UserDashboard")},e.logout=e.logout.bind(Object(d.a)(e)),e.state={token:null,waterData:0,waterFlow:0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){N.auth().signOut()}},{key:"componentDidMount",value:function(){var e=this;E.ajax({url:"https://api.thinger.io/v2/users/husamgh/devices/ard1/SONIC",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkZXYiOiJhcmQxIiwiaWF0IjoxNTY3NDMyOTk0LCJqdGkiOiI1ZDZkMjEyMjIyNzc5NGVjOTA4NTI5Y2MiLCJyZXMiOlsiU09OSUMiLCJTT05JQ18yIiwiRmxvdyBtZXRlciJdLCJ1c3IiOiJodXNhbWdoIn0.zNCvFJHuXoGYZialB3l7XXeyAfFjpILHzztupMYWAI0")},success:function(t){console.log("success"),console.log(t),e.setState({waterData:t.out})}}),E.ajax({url:"https://api.thinger.io/v2/users/husamgh/devices/ard1/Flow meter",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkZXYiOiJhcmQxIiwiaWF0IjoxNTY3NDMyOTk0LCJqdGkiOiI1ZDZkMjEyMjIyNzc5NGVjOTA4NTI5Y2MiLCJyZXMiOlsiU09OSUMiLCJTT05JQ18yIiwiRmxvdyBtZXRlciJdLCJ1c3IiOiJodXNhbWdoIn0.zNCvFJHuXoGYZialB3l7XXeyAfFjpILHzztupMYWAI0")},success:function(t){console.log("success"),console.log(t),e.setState({waterFlow:t.out})},failure:function(e){console.log(e)}})}},{key:"render",value:function(){var e=this.state.waterData,t=this.state.waterFlow;return o.a.createElement("div",{className:"userDashboard"},o.a.createElement("div",null,o.a.createElement("h1",null,"You are home"),o.a.createElement("button",{onClick:this.logout},"Logout")),o.a.createElement("p",{className:"WaterChartHolder"},"Water Volume in the Tank."),o.a.createElement(v.a,{value:e,width:400,height:320,label:"Liters",color:"#005dfe",valueLabelStyle:5,max:1300}),o.a.createElement("p",{className:"WaterChartHolder"},"Incoming Water Speed Liters/MIN"),o.a.createElement(f.a,{value:t,needleColor:"red",startColor:"green",segments:10,endColor:"blue",maxValue:130}),o.a.createElement("div",null," Available local water Distributors"),o.a.createElement("div",{class:"flex-container"},o.a.createElement("div",null,"water distributor 1"),o.a.createElement("div",null,o.a.createElement("a",{href:"tel:03 123456"},"03 123456")),o.a.createElement("div",null,"Beirut"),o.a.createElement("div",null,"water distributor 2"),o.a.createElement("div",null,o.a.createElement("a",{href:"tel:70 123456"},"70 123456")),o.a.createElement("div",null,"North"),o.a.createElement("div",null,"water distributor 3"),o.a.createElement("div",null,o.a.createElement("a",{href:"tel:71 123456"},"71 123456")),o.a.createElement("div",null,"Mount Lebanon")))}}]),t}(n.Component),j=a(22),k=(a(80),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value)),console.log("event target name",e.target.name),console.log("event target value",e.target.value)},a.routeChange=function(e){e.preventDefault(),a.props.history.push("/SignUp")},a.state={token:null,waterData:0,email:"",password:""},a.login=a.login.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.routeChange=a.routeChange.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"login",value:function(e){e.preventDefault(),console.log("email:",this.state.email),console.log("password:",this.state.password),N.auth().signInWithEmailAndPassword(this.state.email,this.state.password).then(function(e){}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"modal",style:{position:"fixed",top:"0px",bottom:"0px",left:"0px",width:"100vw",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"50px",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement("form",{onSubmit:this.login,ref:function(t){return e.myFormRef=t}},o.a.createElement("div",{className:"container"},o.a.createElement("p",{className:"title"},"Sign In To Your Account"),o.a.createElement("div",{className:"SignInModal textInputContainer"},o.a.createElement("input",{id:"emailId",maxLength:"50",autoComplete:"off",className:"textInputContainer",name:"email",placeholder:"Email",onChange:this.handleChange}),o.a.createElement("input",{id:"passwordId",maxLength:"20",autoComplete:"off",type:"password",className:"textInputContainer",name:"password",placeholder:"Password",onChange:this.handleChange})),o.a.createElement("button",{type:"submit",id:"login",className:"signInUp"},"Sign In"),o.a.createElement("p",{className:"signInUpModal smallText"},"New?",o.a.createElement(s.b,{to:"/SignUp",className:"signInUpLink"},"Signup ")))))}}]),t}(n.Component)),x=(a(83),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),e.props.history.push("/UserDashboard")},e.handleChange=function(t){e.setState(Object(j.a)({},t.target.name,t.target.value)),console.log("event target name",t.target.name),console.log("event target value",t.target.value)},e.state={token:null,header:"Join Us",isSignUpVendorDisabled:!0,error:"",email:"",password:"",fullname:"",phone:"",location:""},e.signup=e.signup.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"signup",value:function(e){var t=this;e.preventDefault(),console.log("email:",this.state.email),console.log("password:",this.state.password),console.log("fullname:",this.state.fullname),console.log("phone:",this.state.phone),console.log("location:",this.state.location),N.auth().createUserWithEmailAndPassword(this.state.email,this.state.password).then(function(e){t.props.history.push("/SignIn")}).catch(function(e){console.log(e),t.setState({error:e})})}},{key:"openVendorSignUp",value:function(){this.setState({header:"Sign up as a Vendor",isSignUpVendorDisabled:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"modal",style:{position:"fixed",top:"0px",bottom:"0px",left:"0px",width:"100vw",backgroundColor:"rgba(0, 0, 0, 0.8)",padding:"50px",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"container"},o.a.createElement("p",{className:"title"},this.state.header),o.a.createElement("div",{className:"SignInModal textInputContainer"},o.a.createElement("input",{id:"nameId",maxLength:"50",autoComplete:"off",className:"textInputContainer",name:"name",placeholder:"Full Name",onChange:this.handleChange}),o.a.createElement("input",{id:"emailId",maxLength:"50",autoComplete:"off",className:"textInputContainer",name:"email",placeholder:"Email",onChange:this.handleChange}),o.a.createElement("input",{id:"passwordId",maxLength:"20",autoComplete:"off",type:"password",className:"textInputContainer",name:"password",placeholder:"Password",onChange:this.handleChange}),o.a.createElement("input",{id:"phoneNb",maxLength:"20",autoComplete:"off",type:"phone",className:"textInputContainer",name:"phone",placeholder:"Phone Number",onChange:this.handleChange}),o.a.createElement("select",{className:"textInputContainer"},o.a.createElement("option",{value:"beirut"},"Beirut"),o.a.createElement("option",{value:"mountLebanon"},"Mount Lebanon"),o.a.createElement("option",{value:"north"},"North"),o.a.createElement("option",{value:"nabatieh"},"Nabatieh"),o.a.createElement("option",{value:"south"},"South"))),o.a.createElement("p",{className:"errorMessage"},this.state.error.message),o.a.createElement("button",{type:"submit",id:"signUp",className:"signInUp",onClick:this.signup},"Sign Up"),o.a.createElement("p",{className:"signInUpModal smallText"},"Already have an account?",o.a.createElement(s.b,{to:"/",className:"signInUpLink"},"Signin ")),this.state.isSignUpVendorDisabled?o.a.createElement("p",{className:"signUpVendorModal smallText",onClick:function(){return e.openVendorSignUp()}},"Get Started as a Vendor"):null))))}}]),t}(n.Component)),S=(a(84),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={user:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.authListener()}},{key:"authListener",value:function(){var e=this;N.auth().onAuthStateChanged(function(t){console.log(t),t?e.setState({user:t}):e.setState({user:{}})})}},{key:"render",value:function(){return console.log("user:",this.state.user),console.log("Object.entries(this.state.user).length",Object.entries(this.state.user).length),o.a.createElement("div",{className:"App"},0===Object.entries(this.state.user).length?o.a.createElement(k,null):o.a.createElement(O,null))}}]),t}(n.Component)),J=(a(85),function(e){function t(e){return Object(c.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){N.auth().signOut(),this.props.history.push("/SignIn")}},{key:"render",value:function(){return o.a.createElement("div",{className:"switch-container"},o.a.createElement("label",{className:"switch"},o.a.createElement("input",{type:"checkbox",checked:!0}),o.a.createElement("span",{className:"slider round"})),o.a.createElement("button",{className:"logout",onClick:this.logout},"Logout"))}}]),t}(n.Component));a(86);var L=function(){return o.a.createElement(s.a,null,o.a.createElement(r.c,null,o.a.createElement(r.a,{exact:!0,path:"/",component:S}),o.a.createElement(r.a,{path:"/SignIn",component:k}),o.a.createElement(r.a,{path:"/signUp",component:x}),o.a.createElement(r.a,{path:"/userDashboard",component:O}),o.a.createElement(r.a,{path:"/vendorDashboard",component:J})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.register("./../public/firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),i.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,1,2]]]);
//# sourceMappingURL=main.a2a371bb.chunk.js.map